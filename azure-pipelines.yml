# Maven
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- master
jobs:
  - job: job1
    pool:
     vmImage: windows-latest
     demands:
     - Agent.Version -equals 3.218.0
    steps:
      - task: Maven@4
        inputs:
         mavenPomFile: '$(System.DefaultWorkingDirectory)/_anirbanLab_BddAzure/pom.xml'
         goals: 'package'
         publishJUnitResults: true
         testResultsFiles: '$(System.DefaultWorkingDirectory)/_anirbanLab_BddAzure/TestNG.xml'
         javaHomeOption: 'Path'
         jdkDirectory: 'C:\Program Files\Java\jdk-12'
         mavenVersionOption: 'Path'
         mavenDirectory: 'C:\Users\anirban.choudhuri\apache-maven-3.9.1-bin\apache-maven-3.9.1'
         mavenSetM2Home: true
         mavenAuthenticateFeed: false
         effectivePomSkip: false
         sonarQubeRunAnalysis: false
      - task: PublishPipelineArtifact@1
        inputs:
          targetPath: '$(System.DefaultWorkingDirectory)/_anirbanLab_BddAzure/target/cucumber-report/CucumberExtentLogReport.html'
          publishLocation: 'pipeline'
          artifact: TestResult